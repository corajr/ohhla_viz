<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Paper Machines</title>
<link href="css/bootstrap.css" rel="stylesheet">
<link href="css/bootstrap-tour.css" rel="stylesheet">
<link href="css/style.css" rel="stylesheet">
<link href="css/ember-table.css" rel="stylesheet">
</head>
<body>

  <script type="text/x-handlebars" data-template-name="application">
<!--
    <div class="navbar navbar-fixed-top">
      <div class="navbar-inner">
        <div class="container">
          <a class="brand" href="#">{{ App.collectionName }}</a>
          {{ view App.NavbarItemsView }}
        </div>
      </div>
    </div>
    -->

    <div class="container">
      <div class="control-icons">
        <a id="download"></a>
        <a id="config"></a>
        <a id="help"></a>
      </div>

      <h2>{{ App.collectionName }}</h2>
    </div>

    <div class="container">
      {{outlet}}
    </div>
  </script>

  <script type="text/x-handlebars" data-template-name="document">
    <div class="row">
      <div class="col-md-12">
        <h2>{{itemLink title itemID}}</h2>
        <p>{{date date}}</p>
      </div>
    </div>    
    <div class="row">
      <div class="col-md-6">
      {{view App.DocTopicsView }}
      </div>
      <div class="col-md-6">
      {{view Ember.D3.WordCloudView contentBinding="topWords" colorBinding="colors" height=600}}
      </div>
    </div>
  </script>

  <script type="text/x-handlebars" data-template-name="documents">
    <!-- <h2>Documents</h2> -->
    <div class="row">
      <div class="col-md-12">
        <table class="table table-condensed">
          <thead>
            <tr>
              {{partial "sortTypes"}}
            </tr>
          </thead>
          <tbody>
            {{#each controller}}
            <tr>
              <td>{{date date}}</td>
              <td>{{localItemLink title itemURL}}</td>
              <td>{{author}}</td>
              <td>{{type}}</td>
            </tr>
            {{/each}}
          </tbody>
        </table>
      </div>
    </div>
  </script>

  <script type="text/x-handlebars" data-template-name="_sortTypes">
    <th>Date
      {{#if sort.isAscending }}
        <span class="caret up"></span>
      {{else}}
        <span class="caret"></span>
      {{/if}}
    </th>
    <th {{action sortBy "title"}}>Title</th>
    <th {{action sortBy "author"}}>Author</th>
    <th {{action sortBy "type"}}>Type</th>
  </script>

  <script type="text/x-handlebars" data-template-name="topic">
    <div class="row">
      <h1>{{ label }}</h1>
    </div>  
    <div class="row">
      <div class="col-md-4">
        {{ view Ember.D3.WordCloudView contentBinding="topWords" color="#d62728"}}

        {{ partial "relatedTopics"}}
      </div>
      <div class="col-md-8 presentation-container">
        {{!--  {{ view App.DocumentsForTopicView }}
                {{ render "documents" documentsForTopic }} --}}

        {{view Ember.Table.TablesContainer controllerBinding="App.documentsTable"}}
      </div>
    </div>
  </script>

  <script type="text/x-handlebars" data-template-name="topicSummary">
    <div class="row">
      <div class="col-md-12">
        {{ view BC.RangeInput max="1" step="0.01" valueBinding="controller.threshold"}}
      </div>     
      <div class="col-md-12">        
        {{ view Ember.D3.NetworkView contentBinding="controller.content"}}
      </div>
    </div>  
  </script>


  <script type="text/x-handlebars" data-template-name="_relatedTopics">
    <h3>Related Topics</h3>
    <ul>
      {{#each relatedTopic in relatedTopics }}
      <li>{{#linkTo "topic" relatedTopic }} {{relatedTopic.label}} {{/linkTo}} {{topicCorrelation controller.content relatedTopic}}</li>
      {{/each}}
    </ul>
  </script>

  <script type="text/x-handlebars" data-template-name="autocomplete">
    {{input type="search" value=searchText placeholder="Search..."}}
    <ul class="suggestions">
      {{#each searchResults}}
        <li style="display: none;">{{this}}</li>
      {{/each}}
    </ul>
  </script>

  <script type="text/x-handlebars" data-template-name="topics">
      {{render "autocomplete"}}
    <div id="topics_list" class="showScroll">
    {{!-- {{view Ember.TextField valueBinding="App.searchQuery" type="search"}} --}}
      <ul>
      {{#each topic in controller }}
        <li {{!--{{bindAttr style=topic.style}} --}}
            {{bindAttr class=topic.isSelected}}
            {{action toggle topic}}>
          {{view App.TopicPrevalenceIconView contentBinding="topic"}}
          <div class="topicName">{{topic.abbreviatedLabel}}</div>
          <div class="topicPercentage">{{topic.prevalencePercent}} of corpus</div>
        </li>
      {{/each}}
      </ul>
    </div>
    <div id="topic_wordcloud">
    {{view Ember.ContainerView currentViewBinding="App.cloud"}}
    </div>
  </script>

  <script type="text/x-handlebars" data-template-name="topicGraph">
    <div class="row">
      <div class="col-md-3">        
        {{ render "topics" }}
      </div>
      <div class="col-md-9">
{{!--        {{view Ember.ContainerView currentViewBinding="App.docCountView"}} --}}
        <div id="topics_graph">
          {{outlet}}
        </div>
      </div>
    </div>

    <div class="row">
      <div class="col-md-12 presentation-container">
      {{view Ember.Table.TablesContainer controllerBinding="App.documentsTable"}}
      </div>
    </div>
  </script>

  <script src="js/libs/jquery-1.9.1.js"></script>
  <script src="js/libs/jquery-ui.min.js"></script>
  <script src="js/libs/jquery.mousewheel.js"></script>
  <script src="js/libs/handlebars-1.0.0-rc.4.js"></script>
  <script src="js/libs/ember-1.0.0-rc.5.js"></script>
  <script src="js/libs/ember-table.js"></script>
  <script src="js/libs/crossfilter.js"></script>
  <script src="js/libs/bootstrap.js"></script>
  <script src="js/libs/bootstrap-tour.js"></script>
  <script src="js/libs/ember-crossfilter.js"></script>
  <script src="js/libs/d3.min.js"></script>
  <script src="js/libs/d3.layout.cloud.js"></script>
  <script src="js/libs/canvg-1.3/rgbcolor.js"></script>
  <script src="js/libs/canvg-1.3/StackBlur.js"></script>
  <script src="js/libs/canvg-1.3/canvg.js"></script>
  <script src="js/mask_cloud.js"></script>
  <script src="js/app.js"></script>
  <script src="js/models.js"></script>
  <script src="js/mallet_lda_jstorC1-6d86c7af.js"></script>
  <script src="js/data.js"></script>
  <script src="js/controllers.js"></script>
  <script src="js/views.js"></script>
  <script src="js/router.js"></script>
  <script src="js/ember-d3.js"></script>
  <script src="js/wordcloud.js"></script>
  <script src="js/topicgraph.js"></script>
  <script src="js/network.js"></script>
  <script src="js/controls.js"></script>
  <script type="text/javascript">

  // http://simurai.com/post/8083942390/force-lion-scrollbar
  if (navigator.appVersion.indexOf("10_7") != -1) {
    jQuery('.showScroll').addClass('lion');
  }
  </script>
</body>
</html>
